// Комунальна квартира - симулятор виживання
let waterDay = 0
let electricityHour = 0

const game = createGame({
  screenWidth: 16,
	screenHeight: 12,
	player: {
		sprite: `
			..2222..
			.222222.
			22.22.22
			22222222
			.222222.
			..2222..
			..2..2..
			.22..22.
		`,
		position: [5, 5]
	},
	templates: {
		'#': {
			sprite: 2,
			solid: true
		},
		'n': { // neighbor сусід
			sprite: `
				..3333..
				.333333.
				33.33.33
				33333333
				.333333.
				..3333..
				..3..3..
				.33..33.
			`,
			dialog: [
				'Твої води багато витрачаєш!',
				'Я зуби чищу.',
				'Часто дуже чищеш!',
				'Раз на день.',
				'Багато! Я раз на тиждень чищу.',
				'...'
			],
			sound: ['BLIP', 33333]
		},
		'o': { // old lady бабця
			sprite: `
				..4444..
				.444444.
				44.44.44
				44444444
				.444444.
				..4444..
				..4..4..
				.44..44.
			`,
			dialog: [
				'А чого ти вночі ходиш?',
				'Я в туалет.',
				'Шумно ходиш!',
				'Я навшпиньках.',
				'Все одно шумно!',
				'Мені не ходити в туалет?',
				'Краще не ходи.'
			],
			sound: ['PICKUP', 44444]
		},
		's': { // student студент
			sprite: `
				..5555..
				.555555.
				55.55.55
				55555555
				.555555.
				..5555..
				..5..5..
				.55..55.
			`,
			dialog: [
				'Музику можна тихше?',
				'Це не музика, це Бах.',
				'Мені все одно.',
				'Некультурний.',
				'Зате сплю нормально.',
				'Бах не спить.',
				'Бах мертвий.'
			],
			sound: ['BLIP', 55555]
		},
		'k': { // kitchen кухня
			sprite: 6,
			dialog: 'Кухня загальна.|А де моя полиця?|Твоя? Тут все спільне.|А хто з\'їв мою ковбасу?|Всі. По черзі.|А чому не запитали?|Ти спав.',
			sound: ['PICKUP', 66666]
		},
		'b': { // bathroom ванна
			sprite: 7,
			dialog: 'Воду дають раз на тиждень.|А сьогодні який день?|Середа.|А воду коли дали?|В понеділок.|А наступна коли?|Через місяць.',
			sound: ['BLIP', 77777]
		},
		't': { // toilet туалет
			sprite: 8,
			dialog: 'Замок зламаний.|Вже рік.|А чому не ремонтуєте?|Сусід сказав, що сам полагодить.|Коли?|Коли помре.|А він здоровий?',
			sound: ['PICKUP', 88888]
		},
		'e': { // electricity лічильник
			sprite: 9,
			onCollide(target) {
				electricityHour++
				if (electricityHour > 2) {
					game.openDialog('Електрику відключили.|За борги.|Яких борги?|Майбутні.')
					electricityHour = 0
				} else {
					game.openDialog('Світло є.|Поки що.|Насолоджуйтесь.')
				}
			},
			sound: ['BLIP', 99999]
		}
	},
	map: `
		############
		#n.........#
		#..o.......#
		#..........#
		#....k.....#
		#.....#....#
		#..b..t....#
		#..........#
		#s........e#
		############
	`,
	background: 1,
	onStart() {
		game.openDialog('Комуналка...|Це не квартира.|Це соціальний експеримент.')
	},
	onUpdate() {
		waterDay++
		if (waterDay > 500) {
			game.openDialog('Воду відключили.|Назавжди.')
			waterDay = 0
		}
	}
})