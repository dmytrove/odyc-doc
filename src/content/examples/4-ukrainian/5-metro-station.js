// Станція метро - підземний лімб
let trainTimer = 0
let announcements = [
	'Поїзд затримується.',
	'Поїзд відмінено.',
	'Поїзд існує лише у вашій уяві.',
	'Поїзда ніколи не було.',
	'Що таке поїзд?'
]

const game = createGame({
	title: `Станція метро
    
    Тут час зупинився

      Разом з поїздами
	`,
	screenWidth: 16,
	screenHeight: 12,
	player: {
		sprite: `
			..2222..
			.222222.
			22.22.22
			22222222
			.222222.
			..2222..
			..2..2..
			.22..22.
		`,
		position: [1, 7]
	},
	templates: {
		'#': {
			sprite: 1,
			solid: true,
			onTurn() {
				let i = Math.random() * 10
				if (i < 0.1) {
					// 20% chance each turn
					// alert(i)

					let randomAnnouncement = announcements[Math.floor(Math.random() * announcements.length)]
					game.openDialog(randomAnnouncement)
				}
			}
		},
		'=': {
			// рейки
			sprite: 8,
			dialog: 'Не стояти на рейках.|Небезпечно.|Хоча поїзда немає.'
		},
		a: {
			// announcer диктор
			sprite: `
				..3333..
				.333333.
				33.33.33
				33333333
				.333333.
				..3333..
				..3..3..
				.33..33.
			`,
			dialog:
				'*крізь динамік* Увага!|Що сталось?|Нічого. Просто увага.|А для чого?|Щоб ви слухали.|А що слухати?|Увагу.',
			sound: ['BLIP', 11111]
		},
		o: {
			// old man дідусь
			sprite: `
				..4444..
				.444444.
				44.44.44
				44444444
				.444444.
				..4444..
				..4..4..
				.44..44.
			`,
			dialog:
				'Я тут з 1987 року.|Чекаєте поїзд?|А що таке поїзд?|Той, що має приїхати.|А-а-а... Ні, не чекаю.|А що робите?|Живу. Тут тепло.',
			sound: ['PICKUP', 22222]
		},
		m: {
			// musician музикант
			sprite: `
				..5555..
				.555555.
				55.55.55
				55555555
				.555555.
				..5555..
				..5..5..
				.55..55.
			`,
			dialog:
				'*грає на гітарі*|Гарна мелодія.|Це не мелодія.|А що?|Крик душі.|А чому душа кричить?|Бо тіло мовчить.',
			sound: ['PICKUP', 33333]
		},
		g: {
			// guard охоронець
			sprite: `
				..6666..
				.666666.
				66.66.66
				66666666
				.666666.
				..6666..
				..6..6..
				.66..66.
			`,
			dialog:
				'Не спати на лавці!|Я не сплю.|А що робите?|Медитую.|Схоже на сон.|Сон - це теж медитація.|Логічно.',
			sound: ['BLIP', 44444]
		},
		s: {
			// seller продавець
			sprite: `
				..7777..
				.777777.
				77.77.77
				77777777
				.777777.
				..7777..
				..7..7..
				.77..77.
			`,
			dialog:
				'Квитки! Квитки на поїзд!|А поїзд є?|Немає.|А навіщо квитки?|Для краси.|А скільки коштують?|Безкоштовні. Як і поїзд.',
			sound: ['PICKUP', 55555]
		},
		t: {
			// turnstile турнікет
			sprite: 9,
			dialog:
				'Турнікет зламаний.|А як пройти?|Ніяк.|А люди як проходять?|Телепортуються.|А я можу?|Спробуйте.',
			sound: ['BLIP', 66666]
		}
	},
	map: `
		############
		#a.........#
		#..o.......#
		#.....m....#
		#..........#
		#g.......s.#
		#..........#
		#..........#
		#====t=====#
		############
	`,
	background: 0
})
